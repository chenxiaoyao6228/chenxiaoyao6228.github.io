(window.webpackJsonp=window.webpackJsonp||[]).push([[104],{671:function(t,s,a){"use strict";a.r(s);var e=a(7),r=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"å‰è¨€"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å‰è¨€"}},[t._v("#")]),t._v(" å‰è¨€")]),t._v(" "),a("p",[t._v("åœ¨é€› Bç«™çš„æ—¶å€™å‘ç°ä¸€å¥—Udemyä¸Šçš„SSRæ•™ç¨‹, æ•™ä½ å¦‚ä½•æ‰‹å†™SSRåŸºæœ¬æ¡†æ¶ï¼Œè™½ç„¶é¡¹ç›®ä¸­æš‚æ—¶è¿˜æ²¡æœ‰ç”¨åˆ°çš„æœºä¼šï¼Œä½†ç§‰æ‰¿ç€è‰ºå¤šä¸å‹èº«çš„åŸåˆ™ï¼ŒèŠ±äº†ä¸€å¤©æ—¶é—´è¿‡å®Œäº†ï¼Œç®€å•åšä¸ªè®°å½•ï¼Œåç»­æœ‰éœ€è¦çš„æ—¶å€™å†ç»†çœ‹ã€‚")]),t._v(" "),a("h2",{attrs:{id:"ssr-çš„ä¼˜ç¼ºç‚¹åŠé€‚ç”¨åœºæ™¯"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ssr-çš„ä¼˜ç¼ºç‚¹åŠé€‚ç”¨åœºæ™¯"}},[t._v("#")]),t._v(" SSR çš„ä¼˜ç¼ºç‚¹åŠé€‚ç”¨åœºæ™¯")]),t._v(" "),a("h3",{attrs:{id:"ssrçš„ä¼˜åŠ¿"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ssrçš„ä¼˜åŠ¿"}},[t._v("#")]),t._v(" SSRçš„ä¼˜åŠ¿")]),t._v(" "),a("p",[t._v("ä¸ CSR(client-side-rendering)ç›¸æ¯”ï¼Œ SSRå…·æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š")]),t._v(" "),a("h4",{attrs:{id:"æ€§èƒ½"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ€§èƒ½"}},[t._v("#")]),t._v(" æ€§èƒ½")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("ç½‘ç»œé“¾è·¯ï¼šçœå»äº†å®¢æˆ·ç«¯äºŒæ¬¡è¯·æ±‚æ•°æ®çš„ç½‘ç»œä¼ è¾“å¼€é”€ï¼ŒæœåŠ¡ç«¯çš„ç½‘ç»œç¯å¢ƒè¦ä¼˜äºå®¢æˆ·ç«¯ï¼Œå†…éƒ¨æœåŠ¡å™¨ä¹‹é—´é€šä¿¡è·¯å¾„ä¹Ÿæ›´çŸ­")])]),t._v(" "),a("li",[a("p",[t._v("å†…å®¹å‘ˆç°ï¼š é¦–å±åŠ è½½æ—¶é—´ï¼ˆFCPï¼‰æ›´å¿«ï¼Œæµè§ˆå™¨å†…å®¹è§£æä¼˜åŒ–æœºåˆ¶èƒ½å¤Ÿå‘æŒ¥ä½œç”¨")])])]),t._v(" "),a("h4",{attrs:{id:"å¯è®¿é—®æ€§"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å¯è®¿é—®æ€§"}},[t._v("#")]),t._v(" å¯è®¿é—®æ€§")]),t._v(" "),a("p",[t._v("ç›¸æ¯”CSRçš„ç©ºå£³é¦–é¡µè€Œè¨€ï¼ŒSSRé¦–å±çš„é¡µé¢è¦ä¸°å¯Œå¾—å¤š.\n"),a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/chenxiaoyao6228/cloudimg@main/2023/ssr-juejin.png",alt:""}})]),t._v(" "),a("h3",{attrs:{id:"ssrçš„ç¼ºç‚¹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ssrçš„ç¼ºç‚¹"}},[t._v("#")]),t._v(" SSRçš„ç¼ºç‚¹")]),t._v(" "),a("ul",[a("li",[t._v("æ”¹é€ æˆæœ¬å¤§ï¼šå­˜é‡çš„CSRä»£ç å®ç°æ”¹é€ å›°éš¾")]),t._v(" "),a("li",[t._v("æœåŠ¡çš„ç¨³å®šæ€§å’Œæ€§èƒ½è¦æ±‚ä»¥åŠæœåŠ¡å™¨çš„æˆæœ¬")]),t._v(" "),a("li",[t._v("é…å¥—è®¾æ–½çš„å»ºè®¾")])]),t._v(" "),a("h3",{attrs:{id:"ssr-çš„é€‚ç”¨åœºæ™¯"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ssr-çš„é€‚ç”¨åœºæ™¯"}},[t._v("#")]),t._v(" SSR çš„é€‚ç”¨åœºæ™¯")]),t._v(" "),a("p",[t._v("å†…å®¹å¯†é›†å‹é¡µé¢ï¼Œå¦‚ç¨€åœŸæ˜é‡‘è¿™ç±»é—¨æˆ·ç½‘ç«™ï¼Œä»¥åŠå…¬å¸å®˜ç½‘ã€‚")]),t._v(" "),a("h2",{attrs:{id:"ssr-æ¶‰åŠçš„æŠ€æœ¯ç‚¹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ssr-æ¶‰åŠçš„æŠ€æœ¯ç‚¹"}},[t._v("#")]),t._v(" SSR æ¶‰åŠçš„æŠ€æœ¯ç‚¹")]),t._v(" "),a("h3",{attrs:{id:"é¦–é¡µè¯·æ±‚çš„æ—¶å€™-å¦‚ä½•å°†ç»„ä»¶è½¬åŒ–ä¸º-html"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#é¦–é¡µè¯·æ±‚çš„æ—¶å€™-å¦‚ä½•å°†ç»„ä»¶è½¬åŒ–ä¸º-html"}},[t._v("#")]),t._v(" é¦–é¡µè¯·æ±‚çš„æ—¶å€™ï¼Œå¦‚ä½•å°†ç»„ä»¶è½¬åŒ–ä¸º HTML")]),t._v(" "),a("ul",[a("li",[t._v("å¦‚ä½•åœ¨serverç«¯è·‘jsx => è·‘webpackå°†ç”Ÿæˆbundle, ç„¶åé‡å¯server, (nodemonè‡ªåŠ¨é‡å¯)")]),t._v(" "),a("li",[t._v("å°† JS ç»„ä»¶è½¬åŒ–ä¸ºhtml => ReactDOM.renderToString()")])]),t._v(" "),a("h3",{attrs:{id:"å¦‚ä½•æ ¹æ®ä¸åŒçš„ç”¨æˆ·è·¯ç”±è¿›å…¥"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å¦‚ä½•æ ¹æ®ä¸åŒçš„ç”¨æˆ·è·¯ç”±è¿›å…¥"}},[t._v("#")]),t._v(" å¦‚ä½•æ ¹æ®ä¸åŒçš„ç”¨æˆ·è·¯ç”±è¿›å…¥")]),t._v(" "),a("p",[t._v("åœ¨nodeå±‚åŠ«æŒ"),a("code",[t._v("req.path")]),t._v(", å†æ ¹æ®act-router-configåŒ¹é…å‡ºå¯¹åº”çš„ç»„ä»¶ï¼Œå†è¿›è¡Œæ¸²æŸ“")]),t._v(" "),a("h3",{attrs:{id:"serverç«¯å’Œclientç«¯æœ‰ä¸¤ä¸ªå®Œå…¨ä¸ä¸€æ ·çš„store-è¯¥å¦‚ä½•å¤„ç†"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#serverç«¯å’Œclientç«¯æœ‰ä¸¤ä¸ªå®Œå…¨ä¸ä¸€æ ·çš„store-è¯¥å¦‚ä½•å¤„ç†"}},[t._v("#")]),t._v(" serverç«¯å’Œclientç«¯æœ‰ä¸¤ä¸ªå®Œå…¨ä¸ä¸€æ ·çš„storeï¼Œ è¯¥å¦‚ä½•å¤„ç†")]),t._v(" "),a("ul",[a("li",[t._v("serveræ³¨å…¥JSONæ•°æ®")]),t._v(" "),a("li",[t._v("clientåˆå§‹åŒ–storeçš„æ—¶å€™ä½¿ç”¨è¯¥store")])]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" store "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createStore")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  reducers"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("INITIAL_STATE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("applyMiddleware")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("thunk"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("withExtraArgument")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("axiosInstance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("blockquote",[a("p",[t._v("ğŸ˜ƒ Update:  è¿™ç‚¹å…¶å®å¯ä»¥å€Ÿé‰´ï¼Œå¦‚æœé¡¹ç›®ä¸­æœ‰nodeä½œä¸º BFFå±‚çš„è¯ï¼Œ å¯ä»¥æŠŠç”¨æˆ·ç™»å½•ç›¸å…³çš„è¯·æ±‚åœ¨nodeå±‚å¤„ç†ï¼Œæ³¨å…¥åˆ°html, å†è¿›è¡Œè„±æ°´")])]),t._v(" "),a("blockquote",[a("p",[t._v("æ—§æ¨¡å¼:\nå®¢æˆ·ç«¯é¡µé¢çš„å±•ç¤ºæµç¨‹ä¸ºï¼š"),a("code",[t._v("è·å– index.html => è·å– bundle.js => æ‰§è¡Œ bundle.js => å‘èµ· checkToken è¯·æ±‚ => å‘èµ· getUserInfo è¯·æ±‚ => æ¸²æŸ“é¡µé¢å…ƒç´ ")]),t._v("ã€‚ç”¨æˆ·å·²ç™»å½•çš„æƒ…å†µä¸‹ï¼Œé¡µé¢è‡³å°‘éœ€è¦ç­‰ 4RTT æ—¶é—´åæ‰èƒ½è¿›è¡Œæ­£å¸¸çš„é¡µé¢æ¸²æŸ“ï¼Œè€Œæœªç™»å½•çš„æƒ…å†µä¸‹ï¼Œä¹Ÿéœ€è¦ 3RTT æ—¶é—´åæ‰èƒ½è·³è½¬åˆ°ç™»å½•é¡µã€‚")])]),t._v(" "),a("blockquote",[a("p",[t._v("æ–°æ¨¡å¼:\nä¸ºäº†å‡å°‘é¡µé¢çš„ RTTï¼Œè®©é¡µé¢å°½å¿«è¿›å…¥æ¸²æŸ“çŠ¶æ€ï¼Œæ‰€ä»¥åœ¨ç”¨æˆ·ç¬¬ä¸€æ¬¡è¯·æ±‚æ—¶ï¼Œå°±å°è¯•æŠŠç”¨æˆ·ä¿¡æ¯æ³¨å…¥åˆ°é¡µé¢ä¸­ï¼Œæ­¤è¿‡ç¨‹ç§°ä¸ºæ³¨æ°´ã€‚åœ¨é¡µé¢é¦–æ¬¡ dom è§£ææ—¶ï¼Œå°†æ³¨å…¥çš„ä¿¡æ¯æŒ‚è½½åˆ° window å¯¹è±¡ä¸Šï¼Œåœ¨ umi.js æ‰§è¡Œæ—¶å°† window ä¸Šçš„ç”¨æˆ·ä¿¡æ¯å­˜å‚¨åˆ°å†…å­˜ä¸­ï¼Œå¹¶é”€æ¯ window ä¸Šçš„ç”¨æˆ·ä¿¡æ¯ï¼Œæ­¤è¿‡ç¨‹ç§°ä¸ºè„±æ°´ã€‚\nç»è¿‡ç”¨æˆ·ä¿¡æ¯çš„æ³¨æ°´ä¸è„±æ°´ï¼Œé¡µé¢çš„æ¸²æŸ“æµç¨‹å˜ä¸ºï¼š"),a("code",[t._v("è·å– index.html => => æ‰§è¡Œ bundle.js => æ¸²æŸ“é¡µé¢å…ƒç´ ")]),t._v("ã€‚ç”¨æˆ·å·²ç™»å½•çš„æƒ…å†µä¸‹ï¼Œåªéœ€è¦ 2RTT å³å¯æ­£å¸¸æ¸²æŸ“é¡µé¢ï¼Œç”¨æˆ·æœªç™»å½•çš„æƒ…å†µä¸‹ï¼Œåªéœ€è¦ 1RTT å³å¯è·³è½¬åˆ°ç™»å½•é¡µé¢ã€‚")])]),t._v(" "),a("h3",{attrs:{id:"å¦‚ä½•é˜²æ­¢xss-æ”»å‡»"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å¦‚ä½•é˜²æ­¢xss-æ”»å‡»"}},[t._v("#")]),t._v(" å¦‚ä½•é˜²æ­¢XSS æ”»å‡»")]),t._v(" "),a("p",[t._v("ä¸èƒ½ç®€å•åœ°ç”¨ JSON.stringify")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("INITIAL_STATE")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" $"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("serialize")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("store"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h3",{attrs:{id:"å¼‚å¸¸å¤„ç†"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å¼‚å¸¸å¤„ç†"}},[t._v("#")]),t._v(" å¼‚å¸¸å¤„ç†")]),t._v(" "),a("ul",[a("li",[t._v("åœ¨SSR: apiå‡ºé”™ç­‰å¼‚å¸¸çš„æ—¶å€™ï¼Œå¦‚ä½•ä¿è¯ç”¨æˆ·ä½“éªŒï¼Ÿ")])]),t._v(" "),a("h2",{attrs:{id:"å‚è€ƒ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å‚è€ƒ"}},[t._v("#")]),t._v(" å‚è€ƒ")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://www.bilibili.com/video/BV194411t7aq",target:"_blank",rel:"noopener noreferrer"}},[t._v("SSR - server side rendering with react and redux"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"http://www.ayqy.net/blog/ssr-pros-and-cons/",target:"_blank",rel:"noopener noreferrer"}},[t._v("SSRçš„åˆ©ä¸å¼Š"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=r.exports}}]);