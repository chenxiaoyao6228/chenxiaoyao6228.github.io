(window.webpackJsonp=window.webpackJsonp||[]).push([[78],{636:function(e,t,o){"use strict";o.r(t);var r=o(7),a=Object(r.a)({},(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[o("h2",{attrs:{id:"前言"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[e._v("#")]),e._v(" 前言")]),e._v(" "),o("p",[e._v("本文主要总结下与文本输入的相关的事件。")]),e._v(" "),o("p",[e._v("测试地址见: 👉 "),o("a",{attrs:{href:"https://chenxiaoyao6228.github.io/html-preview/?https://github.com/chenxiaoyao6228/fe-notes/blob/main/%E6%96%87%E6%9C%AC%E8%BE%93%E5%85%A5/_demo/input-event/input-order.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("在线效果预览"),o("OutboundLink")],1)]),e._v(" "),o("h2",{attrs:{id:"keydown-事件"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#keydown-事件"}},[e._v("#")]),e._v(" keydown 事件")]),e._v(" "),o("p",[e._v("从按钮按下到弹起，会依次触发"),o("code",[e._v("keydown")]),e._v("、 "),o("code",[e._v("beforeinput")]),e._v(", "),o("code",[e._v("keypress")]),e._v("、"),o("code",[e._v("keyup")]),e._v("事件,")]),e._v(" "),o("ul",[o("li",[o("code",[e._v("keydown")]),e._v("和"),o("code",[e._v("keyup")]),e._v("分别在用户按下与松开按键的时候触发")]),e._v(" "),o("li",[o("code",[e._v("keypress(不推荐)")]),e._v(", "),o("code",[e._v("beforeinput")]),e._v(" 会在按下**可显示内容（字符键：数字/字母/符号）**后在 keydown 之后触发，非字符键(Enter, Backspace, Delete, Esc)则不会。")])]),e._v(" "),o("p",[e._v("这也就意味着如果我们想阻止默认的输入行为，就只能在keydown中进行对应的处理(此时浏览器默认行为未完成，输入框还没有更新显示)， 一般会配合"),o("code",[e._v("event.key")]),e._v("或者"),o("code",[e._v("event.code")]),e._v("来判断. 关于"),o("code",[e._v("keyCode")]),e._v("可以看看这篇"),o("a",{attrs:{href:"https://www.zhangxinxu.com/wordpress/2021/01/js-keycode-deprecated/",target:"_blank",rel:"noopener noreferrer"}},[e._v("告别JS keyCode"),o("OutboundLink")],1)]),e._v(" "),o("h2",{attrs:{id:"input-事件"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#input-事件"}},[e._v("#")]),e._v(" input 事件")]),e._v(" "),o("p",[e._v('当输入元素的值发生改变时，将触发"input"事件，'),o("strong",[e._v("无论是键盘输入还是通过粘贴、剪切等方式改变值")]),e._v("。")]),e._v(" "),o("p",[e._v('"input"事件的特点是，它实时响应用户输入，并且对于支持自动填充和预测文本的浏览器，输入过程中也会触发该事件。')]),e._v(" "),o("h2",{attrs:{id:"change-事件"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#change-事件"}},[e._v("#")]),e._v(" change 事件")]),e._v(" "),o("p",[e._v('"change"事件在用户完成输入并且'),o("strong",[e._v("焦点从输入元素移开后触发")]),e._v('。与"input"事件不同，"change"事件在用户确认完成输入后才会执行。(可以留意下文末的 gif 图)')]),e._v(" "),o("p",[e._v("同时，其他的表单表单元素也会触发"),o("code",[e._v("change")]),e._v("事件: "),o("code",[e._v("radio")]),e._v(", "),o("code",[e._v("checkbox")]),e._v(" "),o("code",[e._v("selection")]),e._v(", "),o("code",[e._v('input[type="file"]')]),e._v(", "),o("code",[e._v('input[type="date"]')])]),e._v(" "),o("h2",{attrs:{id:"composition-合成事件"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#composition-合成事件"}},[e._v("#")]),e._v(" composition 合成事件")]),e._v(" "),o("p",[e._v('"composition"事件主要用于处理复杂的文本输入，例如中文输入法的候选词选择过程。它在输入法组合文本时触发，而不是在每次输入字符时触发。')]),e._v(" "),o("p",[e._v('"compositionstart"事件标志着合成过程的开始，"compositionupdate"事件用于在合成过程中更新文本，最后，当合成文本确定时，将触发"compositionend"事件。')]),e._v(" "),o("blockquote",[o("p",[e._v("对于React来说，需要做用户输入过滤拦截的时候，一定要考虑合成事件，不能简单地用onChange事件")])]),e._v(" "),o("h2",{attrs:{id:"用户输入事件触发顺序"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#用户输入事件触发顺序"}},[e._v("#")]),e._v(" 用户输入事件触发顺序")]),e._v(" "),o("p",[e._v("在存在用户输入法输入的时候，事件的触发顺序如图：\n"),o("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/chenxiaoyao6228/cloudimg@main/2023/html-input-order-composition.gif",alt:""}})]),e._v(" "),o("h2",{attrs:{id:"总结"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[e._v("#")]),e._v(" 总结")]),e._v(" "),o("p",[e._v("本文只是简单的列举了一些文本输入相关的事件，实际项目中会遇到比较多的兼容性问题，需要针对对应的问题进行处理。")]),e._v(" "),o("h2",{attrs:{id:"参考"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[e._v("#")]),e._v(" 参考")]),e._v(" "),o("ul",[o("li",[o("a",{attrs:{href:"https://www.zhangxinxu.com/wordpress/2021/01/js-keycode-deprecated/",target:"_blank",rel:"noopener noreferrer"}},[e._v("告别JS keyCode"),o("OutboundLink")],1)]),e._v(" "),o("li",[o("a",{attrs:{href:"https://segmentfault.com/a/1190000018959389",target:"_blank",rel:"noopener noreferrer"}},[e._v("可能这些是你想要的H5软键盘兼容方案"),o("OutboundLink")],1)]),e._v(" "),o("li",[o("a",{attrs:{href:"https://stackoverflow.com/questions/51395393/how-to-trigger-paste-event-manually-in-javascript",target:"_blank",rel:"noopener noreferrer"}},[e._v("textarea的中文输入判断与搜狗输入法的特殊行为"),o("OutboundLink")],1)])])])}),[],!1,null,null,null);t.default=a.exports}}]);